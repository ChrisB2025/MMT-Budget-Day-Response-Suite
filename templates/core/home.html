{% extends 'base.html' %}

{% block content %}
<!-- Hero Section -->
<div class="hero-professional">
    <div class="container-narrow">
        <h1 class="hero-title">
            MMT Budget Day Response Suite
        </h1>
        <p class="hero-subtitle">
            Track budget myths in real-time, crowdsource fact-checks, hold media accountable, and generate comprehensive MMT rebuttals for the UK Budget 2025.
        </p>
        <div class="flex justify-center gap-4 flex-wrap">
            <a href="{% url 'factcheck:submit' %}" class="btn-primary">Submit Fact-Check</a>
            <a href="{% url 'rebuttal:latest' %}" class="btn-secondary">View Latest Rebuttal</a>
        </div>
    </div>
</div>

<!-- Feature Cards -->
<div style="padding: var(--space-lg) 0;">
    <div class="container-professional">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
            <!-- Bingo -->
            <div class="card card-interactive">
                <div class="text-2xl mb-2">ðŸŽ¯</div>
                <h3 class="font-semibold mb-2" style="color: var(--color-text-primary); font-size: var(--font-size-lg);">Budget Bingo</h3>
                <p class="text-small mb-3" style="line-height: 1.4;">Track and mark budget myths in real-time. Compete with others!</p>
                <a href="{% url 'bingo:home' %}" class="btn-secondary">Play Bingo</a>
            </div>

            <!-- Fact-Check -->
            <div class="card card-interactive">
                <div class="text-2xl mb-2">âœ“</div>
                <h3 class="font-semibold mb-2" style="color: var(--color-text-primary); font-size: var(--font-size-lg);">Fact-Check Platform</h3>
                <p class="text-small mb-3" style="line-height: 1.4;">Submit claims for AI-powered fact-checking with MMT perspective.</p>
                <a href="{% url 'factcheck:submit' %}" class="btn-secondary">Submit Claim</a>
            </div>

            <!-- Rebuttal -->
            <div class="card card-interactive">
                <div class="text-2xl mb-2">ðŸ“„</div>
                <h3 class="font-semibold mb-2" style="color: var(--color-text-primary); font-size: var(--font-size-lg);">Comprehensive Rebuttal</h3>
                <p class="text-small mb-3" style="line-height: 1.4;">AI-generated comprehensive analysis and rebuttal document.</p>
                <a href="{% url 'rebuttal:latest' %}" class="btn-secondary">View Rebuttal</a>
            </div>

            <!-- Media Complaints -->
            <div class="card card-interactive">
                <div class="text-2xl mb-2">ðŸ“¢</div>
                <h3 class="font-semibold mb-2" style="color: var(--color-text-primary); font-size: var(--font-size-lg);">Media Complaints</h3>
                <p class="text-small mb-3" style="line-height: 1.4;">Report misinformation and generate AI-powered complaint letters.</p>
                <a href="{% url 'media_complaints:home' %}" class="btn-secondary">File Complaint</a>
            </div>
        </div>
    </div>
</div>

<!-- Stats -->
<div style="background: var(--color-surface); padding: var(--space-xl) 0 var(--space-2xl) 0;">
    <div class="container-professional">
        <h2 class="text-center mb-6" style="font-size: var(--font-size-2xl); color: var(--color-text-primary);">Live Statistics</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="stat-card">
                <span class="stat-number">{{ total_bingo_cards }}</span>
                <span class="stat-label">Bingo Cards Generated</span>
            </div>
            <div class="stat-card">
                <span class="stat-number">{{ total_factchecks }}</span>
                <span class="stat-label">Claims Fact-Checked</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="countdown-timer">Calculating...</span>
                <span class="stat-label">Budget Date</span>
            </div>
        </div>
    </div>
</div>

<script>
function updateCountdown() {
    // Budget Date: November 26, 2025, 12:30 PM UK time
    const budgetDate = new Date('2025-11-26T12:30:00+00:00');
    const now = new Date();
    const diff = budgetDate - now;

    const countdownEl = document.getElementById('countdown-timer');

    if (diff <= 0) {
        countdownEl.textContent = 'Budget Day!';
        countdownEl.style.fontSize = 'var(--font-size-xl)';
        return;
    }

    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((diff % (1000 * 60)) / 1000);

    if (days > 0) {
        countdownEl.textContent = `${days}d ${hours}h ${minutes}m`;
    } else if (hours > 0) {
        countdownEl.textContent = `${hours}h ${minutes}m ${seconds}s`;
    } else {
        countdownEl.textContent = `${minutes}m ${seconds}s`;
    }
}

// Update countdown immediately and then every second
updateCountdown();
setInterval(updateCountdown, 1000);
</script>
{% endblock %}
