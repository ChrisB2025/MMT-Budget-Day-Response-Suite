{% extends 'base.html' %}

{% block title %}Comprehensive Rebuttal - MMT Budget Response Suite{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="hero-professional">
    <div class="container-narrow">
        <h1 class="hero-title">
            ðŸ“„ Comprehensive Budget Rebuttal
        </h1>
        <p class="hero-subtitle">
            AI-generated analysis of the budget speech from an MMT perspective, including debunked myths, fiscal analysis, and action points for activists, MPs, and media.
        </p>
        {% if latest_rebuttal %}
        <div class="flex justify-center gap-4 flex-wrap">
            <a href="{% url 'rebuttal:detail' latest_rebuttal.id %}" class="btn-primary">Read Full Rebuttal</a>
            <a href="{% url 'rebuttal:download' latest_rebuttal.id 'pdf' %}" class="btn-secondary">Download PDF</a>
        </div>
        {% endif %}
    </div>
</div>

<div class="container-professional section-spacing">
    {% if latest_rebuttal %}
    <div class="card" style="margin-bottom: var(--space-xl);">
        <div class="card-header">
            <div>
                <h2 class="card-title" style="margin-bottom: var(--space-xs);">{{ latest_rebuttal.title }}</h2>
                <p class="text-small">Version {{ latest_rebuttal.version }} â€¢ Published {{ latest_rebuttal.published_at|date:"M d, Y" }}</p>
            </div>
        </div>

        <div class="card-footer" style="display: flex; gap: var(--space-md); flex-wrap: wrap; margin-top: var(--space-lg);">
            <a href="{% url 'rebuttal:detail' latest_rebuttal.id %}" class="btn-primary">
                Read Full Rebuttal
            </a>
            <a href="{% url 'rebuttal:download' latest_rebuttal.id 'pdf' %}" class="btn-secondary">
                Download PDF
            </a>
            <a href="{% url 'rebuttal:download' latest_rebuttal.id 'markdown' %}" class="btn-secondary">
                Download Markdown
            </a>
        </div>

        <div style="border-top: 1px solid var(--color-border); padding-top: var(--space-lg); margin-top: var(--space-lg);">
            <h3 style="font-size: var(--font-size-xl); font-weight: 600; color: var(--color-text-primary); margin-bottom: var(--space-md);">Sections</h3>
            <ul class="list-professional">
                {% for section in latest_rebuttal.sections.all %}
                <li style="border: none; padding: var(--space-xs) 0;">
                    <span style="font-weight: 600; margin-right: var(--space-xs);">{{ forloop.counter }}.</span>
                    {{ section.title }}
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    {% else %}
    <div class="card card-status status-warning" style="text-align: center;">
        <div style="font-size: 3rem; margin-bottom: var(--space-md);">ðŸ“‹</div>
        <h3 style="font-size: var(--font-size-xl); font-weight: 600; color: var(--color-text-primary); margin-bottom: var(--space-sm);">No Rebuttal Published Yet</h3>
        <p class="text-small">The comprehensive rebuttal will be available after the budget speech.</p>
    </div>
    {% endif %}
</div>
{% endblock %}
